{% extends 'base.html' %}
{% load static %}

{% block title %} | Product details{% endblock %}

{% block content %}
<br><br>
<div class="my-form container w-75 p-4 rounded border border-3 border-primary">
    <form id="frmaddtocart" action="{% url 'add_to_cart' %}">
        <h2 class="title-font main-title">Product Details</h2>
        {% include 'partials/_alerts.html' %}
        <section>      
            <div class="row">
                <div class="card mb-3 w-100">
                    <div class="row no-gutters">
                        <div class="col-md-4 my-5">
                            <img src="{{pro.photo.url}}" class="card-img" alt="...">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h3 class="card-title title-font fs-4" id="productName">{{pro.name}}</h3>
                                <hr>
                                <p class="card-text fs-6" id="description">{{pro.description}}</p>
                                <hr>
                                <p class="card-text fs-5">Current Price: <span id="price" class="bg-dark text-light rounded-circle p-2 fs-5">{{pro.price}} LE</span></p>
                                <hr>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Add To Cart</button>

                                <!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Select Quantity</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <label for="inputQty">Quantity</label>
            <input type="text" class="form-control" value="1" id="inputQty" name="qty" placeholder="" required="">
            <input type="hidden" name="pro_id" value="{{pro.id}}"> 
            <input type="hidden" name="price" value="{{pro.price}}"> 
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnclose">Close</button>
          <button class="btn btn-primary" onclick="addtocart()">Confirm</button>
        </div>
      </div>
    </div>
  </div>


                                <a href="{% url 'product_favorite' pro_id=pro.id %}" class="btn btn-primary text-white me-5">
                                    <svg class="bi bi-star-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"></path>
                                    </svg>
                                </a>
                                <a href="{% url 'products' %}" class="btn btn-outline-primary ms-5">All Products</a>
                                <a href="{% url 'index' %}" class="btn btn-outline-primary">
                                    <i class="fas fa-home"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>  
        </section>
    
    </form>
    
<script>
    function addtocart(){
        document.getElementById('btnclose').click();
        document.getElementById('frmaddtocart').submit();
    }
</script>

</div>
<br>
<br>
{% endblock %}